import{a as T,m as S,o as s,f as b,l as E,t as X,u as o,h as d,i as g,c as v,y as w,L as A,M as Y,w as x,D as F,N as Z,O as J,A as ee,P as oe,Q as ne,R as te,S as se,T as le,K as I,F as M,U as z,k as ae,V as ie,W as re,v as D,b as ce,X as ue,Y as pe,Z as me,H as de}from"./entry.e1ce6ad4.js";import{_ as fe}from"./NCheckbox.vue.f03c4497.js";import{_ as _e}from"./NIconButton.vue.8aefaa88.js";import{_ as W}from"./Badge.b694092e.js";import{_ as j}from"./FilepathItem.vue.c7d65dc2.js";import{u as he}from"./editor.58d10855.js";import{_ as ve}from"./DrawerRight.vue.f3060893.js";import{_ as be}from"./NTextInput.vue.188f5529.js";import{_ as ge}from"./NSectionBlock.cef5b3bf.js";import{_ as ye}from"./NIconTitle.vue.6c944aa7.js";import{F as xe}from"./fuse.esm.88e2763d.js";import"./context.10127184.js";const ke=/\d/,$e=["-","_","/","."];function we(n=""){if(!ke.test(n))return n.toUpperCase()===n}function Ce(n,l){const u=l??$e,p=[];if(!n||typeof n!="string")return p;let e="",a,m;for(const f of n){const _=u.includes(f);if(_===!0){p.push(e),e="",a=void 0;continue}const r=we(f);if(m===!1){if(a===!1&&r===!0){p.push(e),e=f,a=r;continue}if(a===!0&&r===!1&&e.length>1){const $=e[e.length-1];p.push(e.slice(0,Math.max(0,e.length-1))),e=$+f,a=r;continue}}e+=f,a=r,m=_}return p.push(e),p}function Ne(n){return n?n[0].toUpperCase()+n.slice(1):""}function H(n){return n?(Array.isArray(n)?n:Ce(n)).map(l=>Ne(l)).join(""):""}const Ve={"text-sm":"","font-mono":""},Se=d("span",{op20:"",mr1:""},"<",-1),Pe=d("span",{op20:"",ml1:""},"/>",-1),q=T({__name:"ComponentName",props:{component:null},setup(n){const l=n,u=S(()=>l.component.pascalName||H(l.component.name||l.component.__name||l.component.kebabName||""));return(p,e)=>(s(),b("code",Ve,[Se,E(X(o(u)),1),Pe]))}}),Be={flex:"~ col gap1","of-hidden":"","items-start":""},Me={flex:"~ gap2"},K=T({__name:"ComponentDetails",props:{component:null},setup(n){const l=n,u=S(()=>l.component.pascalName||H(l.component.name||l.component.__name||l.component.kebabName||"")),p=S(()=>l.component.filePath||l.component.file||l.component.__file||""),e=he();return(a,m)=>{const f=q,_=_e,r=W,$=j;return s(),b("div",Be,[d("div",Me,[g(f,{component:n.component},null,8,["component"]),g(_,{title:"Copy name","flex-none":"",icon:"carbon-copy",onClick:m[0]||(m[0]=t=>o(e)(`<${o(u)}></${o(u)}>`))}),n.component.global?(s(),v(r,{key:0,"bg-green-400:10":"","text-green-400":"",title:"Registered at runtime as a global component",textContent:"runtime"})):w("",!0)]),d("div",null,[o(p)?(s(),v($,{key:0,filepath:o(p),"w-full":"","text-sm":"",op25:"","group-hover:op75":""},null,8,["filepath"])):w("",!0)]),A(a.$slots,"default")])}}}),Re={hover:"bg-active",class:"group",flex:"~ gap2",rounded:"","w-full":"","items-center":"",px2:"",py1:""},Te={"hover:text-primary":""},Ue=T({__name:"ComponentItem",props:{component:null},setup(n){const l=n,u=S(()=>l.component.filePath||l.component.file||l.component.__file||"");return(p,e)=>{const a=q,m=K,f=Y("VDropdown"),_=W,r=j;return s(),b("div",Re,[g(f,null,{popper:x(()=>[g(m,{component:n.component,p4:""},null,8,["component"])]),default:x(()=>[d("button",Te,[g(a,{component:n.component},null,8,["component"])])]),_:1}),n.component.global?(s(),v(_,{key:0,"bg-green-400:10":"","text-green-400":"",title:"Registered at runtime as a global component",textContent:"runtime"})):w("",!0),A(p.$slots,"default"),o(u)?(s(),v(r,{key:1,filepath:o(u),"text-sm":"",op25:"","group-hover:op75":""},null,8,["filepath"])):w("",!0)])}}}),De=d("span",{op75:""},"Show pages",-1),Fe=d("span",{op75:""},"Show layouts",-1),Ie=d("span",{op75:""},"Show workspace",-1),Le=d("span",{op75:""},"Show node_modules",-1),Ae=d("div",{"i-carbon-close":""},null,-1),Ee=d("div",{"flex-auto":""},null,-1),Ge={"w-full":"",relative:"","h-full":""},ze={key:0,p4:"",pr10:"",pt4:"",flex:"~ col gap4"},We=T({__name:"ComponentsGraph",props:{components:null},setup(n){const l=n,u=F(),p=F(),e=Z(),a=F(),m=J(),f=ee(),_=oe(),r=ne(),{componentsGraphShowNodeModules:$,componentsGraphShowPages:t,componentsGraphShowLayouts:y,componentsGraphShowWorkspace:P}=z(),R=F(),G=S(()=>{const C=r.value||[];if(R.value){let c=function(h){!h||i.has(h)||(i.add(h),h.deps.forEach(N=>{c(C.find(V=>V.id===N))}))};const i=new Set;return C.find(h=>h.id===a.value?.id),c(R.value),Array.from(i)}return C}),L=S(()=>{const C=G.value.map(i=>{const h=l.components.find(U=>U.filePath===i.id),N=m.value?.find(U=>U.file===i.id),V=_.value?.find(U=>U.file===i.id),k=i.id.replace(/\?.*$/,"").replace(/\#.*$/,""),B=i.id.includes("/node_modules/")?"lib":h?"user":V?"layout":N?"page":"unknown";if(!$.value&&B==="lib"||!t.value&&B==="page"||!y.value&&B==="layout"||!P.value&&B==="user"&&f.value&&!i.id.startsWith(f.value.rootDir))return null;const Q=B==="layout"?"hexagon":B==="page"?"square":"dot";return{id:i.id,label:k.split("/").splice(-1)[0].replace(/\.\w+$/,""),group:B,shape:Q,size:15+Math.min(i.deps.length/2,8),font:{color:e.value==="dark"?"white":"black"},color:R.value?.id===i.id?"#82c742":void 0,extra:{id:i.id,component:h,page:N,layout:V,relationship:i}}}).filter(i=>!!i),c=G.value.flatMap(i=>i.deps.map(h=>({from:i.id,to:h,arrows:{to:{enabled:!0,scaleFactor:.8}}})));return{nodes:C,edges:c}});te(()=>{const C={nodes:{shape:"dot",size:16},physics:{repulsion:{centralGravity:.7,springLength:100,springConstant:.01},maxVelocity:146,solver:"forceAtlas2Based",timestep:.35,stabilization:{enabled:!0,iterations:200}},groups:{user:{color:"#42b883"},unknown:{color:"#b86542"},lib:{color:"#b4b842"},page:{color:"#42b2b8"},layout:{color:"#4256b8"}}},c=new se(u.value,L.value,C);c.on("click",i=>{const h=i.nodes?.[0],N=L.value.nodes?.find(V=>V.id===h)?.extra;N&&(a.value=N)}),le(L,()=>{c.setData(L.value)})});function O(){R.value=a.value?.relationship,a.value=void 0}return(C,c)=>{const i=fe,h=K,N=ae,V=ve;return s(),b(M,null,[d("div",{ref_key:"navbar",ref:p,flex:"~ gap4",border:"b base",p4:"",absolute:"","flex-1":"","navbar-glass":"","left-0":"","top-0":"","right-0":""},[g(i,{modelValue:o(t),"onUpdate:modelValue":c[0]||(c[0]=k=>I(t)?t.value=k:null),n:"primary sm"},{default:x(()=>[De]),_:1},8,["modelValue"]),g(i,{modelValue:o(y),"onUpdate:modelValue":c[1]||(c[1]=k=>I(y)?y.value=k:null),n:"primary sm"},{default:x(()=>[Fe]),_:1},8,["modelValue"]),g(i,{modelValue:o(P),"onUpdate:modelValue":c[2]||(c[2]=k=>I(P)?P.value=k:null),n:"primary sm"},{default:x(()=>[Ie]),_:1},8,["modelValue"]),g(i,{modelValue:o($),"onUpdate:modelValue":c[3]||(c[3]=k=>I($)?$.value=k:null),n:"primary sm"},{default:x(()=>[Le]),_:1},8,["modelValue"]),o(R)?(s(),b("button",{key:0,flex:"~ gap-1","items-center":"",op50:"","text-xs":"",py1:"","bg-gray:20":"",pl3:"",pr2:"","rounded-full":"","hover:op100":"",onClick:c[4]||(c[4]=k=>R.value=void 0)},[E(" Clear filter "),Ae])):w("",!0),Ee,A(C.$slots,"default")],512),d("div",Ge,[d("div",{ref_key:"container",ref:u,"w-full":"","h-full":""},null,512),g(V,{"model-value":!!(o(a)&&o(a).component),navbar:o(p),"w-80":"",onClose:c[6]||(c[6]=k=>a.value=void 0)},{default:x(()=>[o(a)&&o(a).component?(s(),b("div",ze,[g(h,{component:o(a).component},null,8,["component"]),d("div",null,[g(N,{n:"primary solid",onClick:c[5]||(c[5]=k=>O())},{default:x(()=>[E(" Filter to this component ")]),_:1})])])):w("",!0)]),_:1},8,["model-value","navbar"])])],64)}}}),je={p4:"",flex:"~ gap4","flex-1":"",border:"b base","navbar-glass":""},He={pl4:""},qe=T({__name:"ComponentsList",props:{components:null},setup(n){const l=n,u=F(""),p=S(()=>new xe(l.components,{keys:["pascalName","filePath","kebabName"]})),e=S(()=>{const a=[],m=new Map,f=[],_=[],r={user:0,lib:0,builtin:0,runtime:0};return(u.value?p.value.search(u.value).map(t=>t.item):l.components).forEach(t=>{if(t.filePath&&ie(t.filePath)){const y=re(t.filePath);if(!y)return;y==="nuxt"?(f.push(t),r.builtin++):(m.has(y)||m.set(y,[]),m.get(y).push(t),r.lib++)}else t.global&&!t.filePath?(_.push(t),r.runtime++):(a.push(t),r.user++)}),{count:r,user:a,builtin:f,lib:m,runtime:_}});return(a,m)=>{const f=be,_=Ue,r=ge,$=ye;return s(),b(M,null,[d("div",je,[g(f,{modelValue:o(u),"onUpdate:modelValue":m[0]||(m[0]=t=>I(u)?u.value=t:null),placeholder:"Search...",icon:"carbon-search",p:"x5 y2",n:"primary","flex-auto":"","bg-base":"","border-base":""},null,8,["modelValue"]),A(a.$slots,"default")]),o(e).user.length?(s(),v(r,{key:0,icon:"carbon-nominal",text:"User components",description:`Total components: ${o(e).count.user}`},{default:x(()=>[(s(!0),b(M,null,D(o(e).user,t=>(s(),v(_,{key:t.filePath,"ml--5":"",component:t},null,8,["component"]))),128))]),_:1},8,["description"])):w("",!0),o(e).runtime.length?(s(),v(r,{key:1,icon:"carbon-load-balancer-global",text:"Runtime components",description:`Total components: ${o(e).count.runtime}`},{default:x(()=>[(s(!0),b(M,null,D(o(e).runtime,t=>(s(),v(_,{key:t.filePath,"ml--5":"",component:t},null,8,["component"]))),128))]),_:1},8,["description"])):w("",!0),o(e).builtin.length?(s(),v(r,{key:2,icon:"simple-icons-nuxtdotjs",text:"Built-in components",description:`Total components: ${o(e).count.builtin}`},{default:x(()=>[(s(!0),b(M,null,D(o(e).builtin,t=>(s(),v(_,{key:t.filePath,"ml--5":"",component:t},null,8,["component"]))),128))]),_:1},8,["description"])):w("",!0),o(e).lib.size?(s(),v(r,{key:3,icon:"carbon-3d-mpr-toggle",text:"Components from libraries",description:`${o(e).count.lib} components from ${o(e).lib.size} packages`},{default:x(()=>[(s(!0),b(M,null,D(o(e).lib.entries(),([t,y])=>(s(),b("div",{key:t},[g($,{text:`${t} (${y.length})`,op50:"",py1:""},null,8,["text"]),d("div",He,[(s(!0),b(M,null,D(y,P=>(s(),v(_,{key:P.filePath,component:P},null,8,["component"]))),128))])]))),128))]),_:1},8,["description"])):w("",!0)],64)}}}),Ke={"h-full":"","of-auto":"",relative:""},Oe={"flex-none":"",flex:"~ gap4"},io=T({__name:"components",setup(n){const l=ce(),u=ue(),p=pe(),{componentsView:e}=z();function a(){l.value?.inspector?.instance&&(l.value.inspector.enable(),u.push("/__inspecting"))}function m(){e.value=e.value==="list"?"graph":"list"}return(f,_)=>{const r=de;return s(),b("div",Ke,[(s(),v(me(o(e)==="list"?qe:We),{components:o(p)},{default:x(()=>[d("div",Oe,[d("button",{title:"Toggle view",onClick:m},[o(e)==="graph"?(s(),v(r,{key:0,icon:"i-carbon-list"})):(s(),v(r,{key:1,icon:"i-carbon-network-4"}))]),o(l)?.inspector?.instance?(s(),b("button",{key:0,title:"Inspect Vue components",onClick:a},[g(r,{icon:"i-carbon-select-window"})])):w("",!0)])]),_:1},8,["components"]))])}}});export{io as default};
