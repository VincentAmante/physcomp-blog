import{_ as S}from"./NTextInput.vue.188f5529.js";import{u as a,m as _,a4 as V,an as j,a as B,D as C,af as L,a9 as T,r as U,o as d,c as A,w as D,h as y,i as F,K as E,f as v,v as I,F as R,l as z,t as N,x as O,ah as W}from"./entry.e1ce6ad4.js";import{_ as K}from"./NCodeBlock.vue.f41a0d29.js";import{_ as P}from"./PanelLeftRight.vue.73b30819.js";import{h as q}from"./index.c769634a.js";import{F as X}from"./fuse.esm.88e2763d.js";function G(u,r,p){const[e={},n]=typeof r=="string"?[{},r]:[r,p],s=e.key||q([n,a(e.baseURL),typeof u=="string"?u:"",a(e.params||e.query)]);if(!s||typeof s!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+s);if(!u)throw new Error("[nuxt] [useFetch] request is missing.");const l=s===n?"$f"+s:s,c=_(()=>{let f=u;return typeof f=="function"&&(f=f()),a(f)}),{server:m,lazy:x,default:b,transform:t,pick:o,watch:g,immediate:k,...w}=e,h=V({...w,cache:typeof e.cache=="boolean"?void 0:e.cache}),i={server:m,lazy:x,default:b,transform:t,pick:o,immediate:k,watch:[h,c,...g||[]]};let $;return j(l,()=>($?.abort?.(),$=typeof AbortController<"u"?new AbortController:{},typeof c.value=="string"&&c.value.startsWith("/"),(e.$fetch||globalThis.$fetch)(c.value,{signal:$.signal,...h})),i)}const H={pb2:"",p3:"","navbar-glass":"",border:"b base"},J=y("div",{"x-divider":""},null,-1),M={key:0,"h-full":"","of-hidden":"",flex:"~ col"},Q={border:"b base","text-sm":"","flex-none":"",px4:"",py2:"",op75:""},Y={key:1,"h-full":"",flex:"","items-center":"","justify-center":"",op50:""},re=B({__name:"virtual-files",async setup(u){let r,p;const e=C(""),{data:n}=([r,p]=L(()=>G("/_vfs.json",{key:"vfs-list",baseURL:"/",responseType:"json"},"$3wSzD6RdXF")),r=await r,p(),r),s=_(()=>T().query?.id),l=C();U(()=>{if(!s.value)return;const t=`/_vfs.json/${encodeURIComponent(s.value)}`;fetch(t).then(o=>o.json()).then(o=>l.value=o.current)});function c(t){if(n.value?.rootDir)return t.startsWith(n.value?.rootDir)?t.slice(n.value.rootDir.length):t}const m=_(()=>n.value?n.value.entries.filter(t=>!t.id.startsWith(`${n.value?.rootDir||""}/.nuxt/`)).sort((t,o)=>t.id.localeCompare(o.id)):[]),x=_(()=>new X(m.value,{keys:["id","path"]})),b=_(()=>e.value?x.value.search(e.value).map(t=>t.item):m.value);return(t,o)=>{const g=S,k=W,w=K,h=P;return d(),A(h,{class:"virtual-files","storage-key":"tab-virtual-files"},{left:D(()=>[y("div",H,[F(g,{modelValue:a(e),"onUpdate:modelValue":o[0]||(o[0]=i=>E(e)?e.value=i:null),icon:"carbon-search",placeholder:"Search...",n:"primary"},null,8,["modelValue"])]),(d(!0),v(R,null,I(a(b),i=>(d(),v(R,{key:i.id},[F(k,{px2:"","text-sm":"",py1:"","font-mono":"",block:"",truncate:"","select-none":"",to:`/modules/virtual-files?id=${encodeURIComponent(i.id)}`,class:O(i.id===a(l)?.id?"text-primary n-bg-active":"text-secondary hover:n-bg-hover")},{default:D(()=>[z(N(c(i.id)),1)]),_:2},1032,["to","class"]),J],64))),128))]),right:D(()=>[a(l)?.content?(d(),v("div",M,[y("div",Q,[y("code",null,N(a(l).id),1)]),F(w,{"h-full":"","text-sm":"","of-auto":"",code:a(l).content,lang:"typescript"},null,8,["code"])])):(d(),v("span",Y,"Select one file to start"))]),_:1})}}});export{re as default};
