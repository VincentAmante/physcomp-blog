import{_ as F}from"./NTextInput.vue.188f5529.js";import{_ as S}from"./NSwitch.vue.ce97ebe7.js";import{_ as D}from"./FilepathItem.vue.c7d65dc2.js";import{_ as z}from"./NMarkdown.vue.ae60adfb.js";import{a as M,m as k,M as E,o as t,c as h,w as b,h as l,y as v,i as g,u as e,l as w,f as d,F as I,t as V,v as N,x as j,k as T,A,D as U,ac as P,V as K,ad as L,W as R,K as B}from"./entry.e1ce6ad4.js";import{u as W,o as q}from"./editor.58d10855.js";import{_ as G}from"./NSectionBlock.cef5b3bf.js";import{F as H}from"./fuse.esm.88e2763d.js";import"./context.10127184.js";import"./NIconTitle.vue.6c944aa7.js";const J={"hover:text-primary":""},O={key:0,"text-primary":""},Q={"max-w-100":""},X={"text-sm":"",px4:"",py3:""},Y={flex:"~ gap2",n:"primary xs"},Z={border:"t base",px4:"",py3:""},ee={"text-sm":""},te=l("span",{op50:""},"It has been referenced ",-1),oe={"text-primary":""},ae=l("span",{op50:""}," times by:",-1),ne={flex:"~ col gap-2","text-sm":"","items-start":"",pt3:""},se={key:1,op50:"","text-sm":""},ie=M({__name:"ComposableItem",props:{item:null,metadata:null,filepath:null},setup(n){const u=n,x=W(),m=k(()=>u.item.as||u.item.name),c=k(()=>u.metadata?.injectionUsage?.[m.value]?.count||0),s=k(()=>u.metadata?.injectionUsage?.[m.value]?.moduleIds||[]);return(y,_)=>{const i=z,a=T,r=D,$=E("VDropdown");return t(),h($,{disabled:!u.metadata},{popper:b(()=>[l("div",Q,[l("div",X,[n.item.meta?.description?(t(),h(i,{key:0,tag:"div","text-sm":"",pb3:"",markdown:n.item.meta.description},null,8,["markdown"])):v("",!0),l("div",Y,[g(a,{"n-solid":"",onClick:_[0]||(_[0]=p=>e(x)(e(m)))},{default:b(()=>[w(" Copy ")]),_:1}),n.filepath?(t(),h(a,{key:0,"n-solid":"",onClick:_[1]||(_[1]=p=>n.filepath&&("openInEditor"in y?y.openInEditor:e(q))(n.filepath))},{default:b(()=>[w(" Source ")]),_:1})):v("",!0),n.item.meta?.docsUrl?(t(),h(a,{key:1,"n-solid":"",to:n.item.meta?.docsUrl,target:"_blank"},{default:b(()=>[w(" Docs ")]),_:1},8,["to"])):v("",!0)])]),l("div",Z,[e(c)?(t(),d(I,{key:0},[l("div",ee,[te,l("strong",oe,V(e(c)),1),ae]),l("div",ne,[(t(!0),d(I,null,N(e(s),p=>(t(),h(r,{key:p,filepath:p},null,8,["filepath"]))),128))])],64)):(t(),d("div",se," Not in use via auto import. "))])])]),default:b(()=>[l("button",J,[l("code",{px2:"",py1:"",rounded:"","font-mono":"","text-sm":"","bg-gray:5":"",class:j(n.metadata&&!e(c)?"op30 hover:op100":"")},[w(V(e(m))+" ",1),e(c)?(t(),d("sup",O,"x"+V(e(c)),1)):v("",!0)],2)])]),_:1},8,["disabled"])}}}),re={flex:"~ wrap gap2",p2:"",pl4:""},le=M({__name:"ComposableTree",props:{map:null,root:null,metadata:null},setup(n){return(u,x)=>{const m=D,c=ie;return t(),d("div",null,[(t(!0),d(I,null,N(n.map.entries(),([s,y])=>(t(),d("div",{key:s},[g(m,{filepath:s,op50:"","hover:underline":""},null,8,["filepath"]),l("div",re,[(t(!0),d(I,null,N(y,_=>(t(),h(c,{key:_.as,item:_,metadata:n.metadata,filepath:s.match(/^[\w@]/)?void 0:s},null,8,["item","metadata","filepath"]))),128))])]))),128))])}}}),me={key:0,"h-full":"","of-auto":""},ue={flex:"~ col gap4",border:"b base",px4:"","flex-1":"","navbar-glass":"",pb2:"",pt4:""},ce={key:0},ke=M({__name:"imports",setup(n){const u=A(),x=U(!1),m=U(""),c=P(),s=k(()=>c.value?.metadata),y=k(()=>c.value?.imports.filter(a=>a.as||a.name).sort((a,r)=>(a.as||a.name).localeCompare(r.as||r.name))||[]),_=k(()=>new H(y.value,{keys:["from","as","name"]})),i=k(()=>{const a=new Map,r=new Map,$=new Map;let p=m.value?_.value.search(m.value).map(o=>o.item):y.value;x.value&&s.value&&(p=p.filter(o=>(o.as||o.name)in s.value.injectionUsage));const C={user:0,lib:0,builtin:0};return p.forEach(o=>{const f=K(o.from)?L(R(o.from))?$:r:a;f.has(o.from)||f.set(o.from,[]),f.get(o.from).push(o),C[f===a?"user":f===r?"lib":"builtin"]++}),{user:a,lib:r,builtin:$,count:C}});return(a,r)=>{const $=F,p=S,C=le,o=G;return e(u)?(t(),d("div",me,[l("div",ue,[g($,{modelValue:e(m),"onUpdate:modelValue":r[0]||(r[0]=f=>B(m)?m.value=f:null),placeholder:"Search...",icon:"carbon-search",p:"x5 y2",n:"primary"},null,8,["modelValue"]),e(s)?(t(),d("div",ce,[g(p,{modelValue:e(x),"onUpdate:modelValue":r[1]||(r[1]=f=>B(x)?x.value=f:null),n:"primary sm"},{default:b(()=>[w(" Show used only ")]),_:1},8,["modelValue"])])):v("",!0)]),e(i).user.size?(t(),h(o,{key:0,icon:"carbon-function",text:"User composables",description:`${e(i).count.user} composables from ${e(i).user.size} modules`},{default:b(()=>[g(C,{map:e(i).user,root:e(u).rootDir,metadata:e(s)},null,8,["map","root","metadata"])]),_:1},8,["description"])):v("",!0),e(i).builtin.size?(t(),h(o,{key:1,icon:"simple-icons-nuxtdotjs",text:"Built-in composables",description:`${e(i).count.builtin} composables`},{default:b(()=>[g(C,{map:e(i).builtin,root:e(u).rootDir,metadata:e(s)},null,8,["map","root","metadata"])]),_:1},8,["description"])):v("",!0),e(i).lib.size?(t(),h(o,{key:2,icon:"carbon-3d-mpr-toggle",text:"Composables from libraries",description:`${e(i).count.lib} composables from ${e(i).lib.size} packages`},{default:b(()=>[g(C,{map:e(i).lib,root:e(u).rootDir,metadata:e(s)},null,8,["map","root","metadata"])]),_:1},8,["description"])):v("",!0)])):v("",!0)}}});export{ke as default};
