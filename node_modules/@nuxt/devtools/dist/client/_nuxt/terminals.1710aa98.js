import{a as T,D as b,am as N,R as A,aJ as R,aK as B,e as E,C as f,o,f as _,h as c,i as V,u as e,c as m,y,t as x,F as C,aL as I,a9 as F,X as L,m as q,r as D,v as M,l as h,w as z,x as w,as as U,H as j,ah as H}from"./entry.e1ce6ad4.js";import{_ as g}from"./NIconButton.vue.8aefaa88.js";const J={border:"t base",flex:"~ gap-2","items-center":"",p2:""},K={op50:"","text-sm":""},S=T({__name:"TerminalView",props:{id:null},setup(p){const r=p,d=b(),v=N(),n=b();let s;A(async()=>{s=new R.Terminal({convertEol:!0,cols:80,screenReaderMode:!0});const t=new B.FitAddon;s.loadAddon(t),s.open(d.value),t.fit(),E(window,"resize",()=>{t.fit()}),n.value=await f.getTerminalDetail(r.id),n.value?.buffer&&s.write(n.value.buffer),v.hook("devtools:terminal:data",({id:i,data:l})=>{i===r.id&&s.write(l)})});function u(){f.runTerminalAction(r.id,"clear"),s?.clear()}return(t,i)=>{const l=g;return o(),_(C,null,[c("div",{ref_key:"container",ref:d,"h-full":"","w-full":"","of-auto":"","bg-black":""},null,512),c("div",J,[V(l,{title:"Clear",icon:"i-carbon-clean",onClick:i[0]||(i[0]=k=>u())}),e(n)?.restartable?(o(),m(l,{key:0,title:"Restart",icon:"carbon-renew",onClick:i[1]||(i[1]=k=>("rpc"in t?t.rpc:e(f)).runTerminalAction(p.id,"restart"))})):y("",!0),e(n)?.terminatable?(o(),m(l,{key:1,title:"Terminate",icon:"carbon-delete",onClick:i[2]||(i[2]=k=>("rpc"in t?t.rpc:e(f)).runTerminalAction(p.id,"terminate"))})):y("",!0),c("span",K,x(e(n)?.description),1)])],64)}}}),X={key:0,"h-full":"","w-full":"","of-hidden":"",grid:"~ rows-[max-content_1fr_max-content]"},G={flex:"~",border:"b base","items-center":"","navbar-glass":"","flex-1":""},O={key:1,p10:""},P={key:1,"h-full":"","items-center":"",flex:"","justify-center":""},Q=c("em",{op50:""},"No terminal attached",-1),W=[Q],ne=T({__name:"terminals",setup(p){const r=I(),d=F(),v=L(),n=q(()=>{const u=d.query.id;return r.value?.find(t=>t.id===u)});function s(u){f.runTerminalAction(u,"remove"),v.replace("/modules/terminals")}return D(()=>{!d.query.id&&r.value?.length&&v.replace(`/modules/terminals?id=${encodeURIComponent(r.value[0].id)}`)}),(u,t)=>{const i=j,l=g,k=H,$=S;return e(r)?.length?(o(),_("div",X,[c("div",G,[(o(!0),_(C,null,M(e(r),a=>(o(),m(k,{key:a.id,border:"r base",flex:"~ gap-2","items-center":"",px3:"",py2:"",class:w(a.id===e(n)?.id?"bg-active":""),to:`/modules/terminals?id=${encodeURIComponent(a.id)}`},{default:z(()=>[a.icon?(o(),m(i,{key:0,icon:a.icon},null,8,["icon"])):y("",!0),c("span",{class:w(a.id===e(n)?.id?"":"op50")},x(a.name)+x(a.isTerminated?" (terminated)":""),3),a.isTerminated?(o(),m(l,{key:1,icon:"carbon-close","mx--2":"",onClick:U(Y=>s(a.id),["stop"])},null,8,["onClick"])):y("",!0)]),_:2},1032,["class","to"]))),128))]),e(n)?(o(),m($,{id:e(n).id,key:e(n).id},null,8,["id"])):(o(),_("div",O,[h(" Terminal "),c("code",null,x(e(d).query.id),1),h(" not found ")]))])):(o(),_("div",P,W))}}});export{ne as default};
