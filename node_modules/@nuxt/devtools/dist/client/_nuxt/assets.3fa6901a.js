import{_ as H}from"./NTextInput.vue.188f5529.js";import{a as B,m as w,p as te,o as n,f as l,q as ne,u as t,c as x,h as e,t as g,s as oe,r as se,F as A,v as U,x as G,w as j,l as z,y as $,k as q,z as Z,A as ae,B as ie,i as m,C as K,D as R,e as M,E as le,G as re,H as J,I as ce,J as de,K as ue}from"./entry.e1ce6ad4.js";import{_ as W}from"./NIconButton.vue.8aefaa88.js";import{u as pe}from"./context.10127184.js";import{h as me}from"./index.c769634a.js";import{_ as fe}from"./NSectionBlock.cef5b3bf.js";import{_ as he}from"./FilepathItem.vue.c7d65dc2.js";import{_ as _e}from"./NCodeBlock.vue.f41a0d29.js";import{u as Q,o as ve}from"./editor.58d10855.js";import{_ as ge}from"./DrawerRight.vue.f3060893.js";import{F as xe}from"./fuse.esm.88e2763d.js";import"./NIconTitle.vue.6c944aa7.js";const be=B({__name:"AssetFontPreview",props:{asset:null},setup(a){const s=a,o=w(()=>`devtools-assets-${me(s.asset)}`);return te(w(()=>`
  @font-face {
    font-family: '${o.value}';
    src: url('${s.asset.publicPath}');
  }
`)),(_,f)=>(n(),l("div",{"of-hidden":"",style:ne({fontFamily:`'${t(o)}'`})}," Aa Bb Cc Dd Ee Ff Gg Hh Ii Jj Kk Ll Mm Nn Oo Pp Qq Rr Ss Tt Uu Vv Ww Xx Yy Zz ",4))}}),ye={"items-center":"","of-hidden":"","justify-center":"",flex:"",p1:"","bg-active":"","object-cover":""},we=["src"],$e={key:2,op20:"","text-3xl":"","i-carbon-document":""},ke={key:3,"w-full":"",p4:"","self-start":""},Ce=["textContent"],Fe={key:4,op20:"","text-3xl":"","i-carbon-help":""},X=B({__name:"AssetPreview",props:{asset:null,textContent:null},setup(a){return(s,o)=>{const _=be;return n(),l("div",ye,[a.asset.type==="image"?(n(),l("img",{key:0,src:a.asset.publicPath},null,8,we)):a.asset.type==="font"?(n(),x(_,{key:a.asset.publicPath,asset:a.asset,p2:"","self-stretch":"","text-2xl":""},null,8,["asset"])):a.asset.type==="text"&&!a.textContent?(n(),l("div",$e)):a.asset.type==="text"&&a.textContent?(n(),l("div",ke,[e("pre",{"of-hidden":"","font-mono":"","text-xs":"","max-h-10rem":"",textContent:g(a.textContent)},null,8,Ce)])):(n(),l("div",Fe))])}}}),Pe={key:0,"n-code-block":"",relative:""},Ne={flex:"~ wrap","w-full":""},De=["onClick"],Ae=e("div",{"flex-auto":""},null,-1),Ie=e("div",{"x-divider":""},null,-1),Se=B({__name:"CodeSnippets",props:{codeSnippets:null},setup(a){const s=a,o=oe(s.codeSnippets[0]),_=Q();return se(()=>{s.codeSnippets.includes(o.value)||(o.value=s.codeSnippets[0])}),(f,y)=>{const c=q,C=_e;return a.codeSnippets.length?(n(),l("div",Pe,[e("div",Ne,[(n(!0),l(A,null,U(a.codeSnippets,(k,I)=>(n(),l("button",{key:I,p2:"",border:"r base",hover:"bg-active",class:G(k===t(o)?"bg-active":""),onClick:E=>o.value=k},[e("div",{class:G(k===t(o)?"":"op50")},g(k.name),3)],10,De))),128)),Ae,t(o)?.docs?(n(),x(c,{key:0,to:t(o).docs,target:"_blank",icon:"carbon-help",n:"sm primary",border:"none",my1:"","px-2":""},{default:j(()=>[z(" Docs ")]),_:1},8,["to"])):$("",!0),t(o)?(n(),x(c,{key:1,icon:"carbon-copy",n:"sm primary",border:"none","px-2":"",my1:"",mr1:"",onClick:y[0]||(y[0]=k=>t(_)(t(o).code))},{default:j(()=>[z(" Copy ")]),_:1})):$("",!0)]),Ie,t(o)?(n(),x(C,{key:0,code:t(o).code,lang:t(o).lang,lines:!1,"w-full":"","of-auto":"",p3:""},null,8,["code","lang"])):$("",!0)])):$("",!0)}}}),ze={flex:"~ col gap-4","w-full":"","of-hidden":"","min-h-full":"",p4:""},je=e("div",{flex:"~ gap2",op50:"","items-center":"","mb--2":""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Preview "),e("div",{"x-divider":""})],-1),Be={flex:"~","items-center":"","justify-center":""},Ee=e("div",{op50:"","mb--2":"",flex:"~ gap2","items-center":""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Details "),e("div",{"x-divider":""})],-1),Te={"w-full":"","max-w-full":"","table-fixed":""},Le=e("td",{op50:"","text-right":"",pr5:"","ws-nowrap":"","w-30":""}," Filepath ",-1),Re={flex:"~ gap-1","items-center":"","w-full":""},Ue=e("td",{"text-right":"",op50:"",pr5:"","w-30":"","ws-nowrap":""}," Public Path ",-1),Ve={flex:"~ gap-1","items-center":"","w-full":"","of-hidden":""},Oe={"of-hidden":"","font-mono":"","flex-auto":"","ws-pre":"",truncate:""},Me=e("td",{"text-right":"",op50:"",pr5:"","w-30":"","ws-nowrap":""}," Type ",-1),Ge={capitalize:""},Ke=e("td",{"text-right":"",op50:"",pr5:"","w-30":"","ws-nowrap":""}," Image Size ",-1),qe={key:0},Ze=e("td",{"text-right":"",op50:"",pr5:"","w-30":"","ws-nowrap":""}," Aspect Ratio ",-1),He=e("td",{"text-right":"",op50:"",pr5:"","w-30":"","ws-nowrap":""}," File size ",-1),Je=e("td",{"text-right":"",op50:"",pr5:"","w-30":"","ws-nowrap":""}," Last modified ",-1),We={op70:""},Qe=e("div",{op50:"","mb--2":"",flex:"~ gap2","items-center":""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Actions "),e("div",{"x-divider":""})],-1),Xe={flex:"~ gap2 wrap"},Ye=e("div",{"flex-auto":""},null,-1),et=B({__name:"AssetDetails",props:{asset:null},setup(a){const s=a,o=Z(()=>{if(s.asset.type==="image")return K.getImageMeta(s.asset.filePath)}),_=Z(()=>{if(s.asset.type==="text")return K.getTextAssetContent(s.asset.filePath)}),f=ae(),y=w(()=>(f.value?._installedModules||[]).some(u=>u.meta?.name==="@nuxt/image"||u.meta?.name==="@nuxt/image-edge")),c=w(()=>{const i=[];if(s.asset.type==="image"){const u=o.value?.width?`
  width="${o.value.width}"
  height="${o.value.height}" `:" ";return i.push({lang:"vue-html",code:`<img${u}
  src="${s.asset.publicPath}"
/>`,name:"Plain Image"}),y.value&&i.push({lang:"vue-html",code:`<NuxtImage${u}
  src="${s.asset.publicPath}"
/>`,name:"Nuxt Image",docs:"https://image.nuxtjs.org/components/nuxt-img"},{lang:"vue-html",code:`<NuxtPicture${u}
  src="${s.asset.publicPath}"
/>`,name:"Nuxt Picture",docs:"https://image.nuxtjs.org/components/nuxt-picture"}),i}return i.push({lang:"html",code:`<a download href="${s.asset.publicPath}">
  Download ${s.asset.path.split("/").slice(-1)[0]}
</a>`,name:"Download link"}),i}),C=Q(),k=ie(()=>s.asset.mtime),I=w(()=>{const i=s.asset.size;return i<1024?`${i} B`:i<1024*1024?`${(i/1024).toFixed(2)} KB`:`${(i/1024/1024).toFixed(2)} MB`}),E=w(()=>{if(!o.value?.width||!o.value?.height)return"";const i=(P,N)=>N?i(N,P%N):P,u=i(o.value.width,o.value.height);return u>3?`${o.value.width/u}:${o.value.height/u}`:""}),F=w(()=>["image","text","video","font"].includes(s.asset.type));return(i,u)=>{const P=X,N=he,S=W,T=q,L=Se;return n(),l("div",ze,[t(F)?(n(),l(A,{key:0},[je,e("div",Be,[m(P,{rounded:"","max-h-80":"","w-auto":"","min-h-20":"","min-w-20":"",border:"~ base",asset:a.asset,"text-content":t(_)},null,8,["asset","text-content"])])],64)):$("",!0),Ee,e("table",Te,[e("tbody",null,[e("tr",null,[Le,e("td",null,[e("div",Re,[m(N,{filepath:a.asset.filePath,"text-left":""},null,8,["filepath"]),m(S,{"flex-none":"",title:"Open in Editor",icon:"carbon-launch",onClick:u[0]||(u[0]=r=>("openInEditor"in i?i.openInEditor:t(ve))(a.asset.filePath))})])])]),e("tr",null,[Ue,e("td",null,[e("div",Ve,[e("div",Oe,g(a.asset.publicPath),1),m(S,{"flex-none":"",title:"Copy public path",icon:"carbon-copy",onClick:u[1]||(u[1]=r=>t(C)(a.asset.publicPath))}),m(S,{"flex-none":"",to:a.asset.publicPath,icon:"carbon-launch",target:"_blank",title:"Open in browser"},null,8,["to"])])])]),e("tr",null,[Me,e("td",Ge,g(a.asset.type),1)]),t(o)?.width?(n(),l(A,{key:0},[e("tr",null,[Ke,e("td",null,g(t(o).width)+" x "+g(t(o).height),1)]),t(E)?(n(),l("tr",qe,[Ze,e("td",null,g(t(E)),1)])):$("",!0)],64)):$("",!0),e("tr",null,[He,e("td",null,g(t(I)),1)]),e("tr",null,[Je,e("td",null,[z(g(new Date(a.asset.mtime).toLocaleString())+" ",1),e("span",We,"("+g(t(k))+")",1)])])])]),Qe,e("div",Xe,[m(T,{to:a.asset.publicPath,download:"",target:"_blank",icon:"carbon-download"},{default:j(()=>[z(" Download ")]),_:1},8,["to"]),a.asset.type==="image"?(n(),x(T,{key:0,disabled:"",icon:"carbon-image-service"},{default:j(()=>[z(" Optimize image (Coming soon) ")]),_:1})):$("",!0)]),Ye,t(c).length?(n(),x(L,{key:1,border:"t base","mx--4":"","mb--4":"","code-snippets":t(c)},null,8,["code-snippets"])):$("",!0)])}}}),tt={flex:"~ col gap-1",hover:"bg-active",rounded:"","of-hidden":"","items-center":"",p2:""},nt={"of-hidden":"","w-full":"","ws-nowrap":"",truncate:"","text-center":"","text-xs":""},ot=B({__name:"AssetGridItem",props:{asset:null,folder:null},setup(a){const s=a,o=w(()=>s.folder&&s.asset.path.startsWith(s.folder)?s.asset.path.slice(s.folder.length):s.asset.path);return(_,f)=>{const y=X;return n(),l("button",tt,[m(y,{rounded:"","w-30":"","h-30":"",border:"~ base",asset:a.asset},null,8,["asset"]),e("div",nt,g(t(o)),1)])}}}),st={flex:"~ gap-1","w-full":"","items-center":"",hover:"bg-active",rounded:"",px4:"",py2:""},at={"text-center":"","ws-nowrap":"","of-hidden":"",truncate:""},it=B({__name:"AssetListItem",props:{asset:null},setup(a){const s=a,o=w(()=>s.asset.type==="image"?"i-carbon-image":s.asset.type==="video"?"i-carbon-video":s.asset.type==="audio"?"i-carbon-volume-up":s.asset.type==="font"?"i-carbon-text-small-caps":s.asset.type==="text"?"i-carbon-document":s.asset.type==="json"?"i-carbon-json":"i-carbon-document-blank");return(_,f)=>(n(),l("button",st,[e("div",{class:G(t(o))},null,2),e("div",at,g(a.asset.path),1)]))}}),lt={key:0,"items-center":"","w-full":"",flex:"","justify-center":"","h-full":""},rt={for:"drop-zone-input","text-3xl":""},ct={key:1,"h-full":"","w-full":"",relative:"",grid:"~ rows-[max-content_1fr_max-content]"},dt=e("div",{px6:"",py6:""},[e("h1",{"text-2xl":""}," Upload "),e("p",{"text-sm":"",op50:""}," Drag and drop files to upload ")],-1),ut={grid:"~ cols-minmax-8rem","overflow-auto":"",p6:""},pt={"items-center":"","justify-center":"",flex:"","of-hidden":"",rounded:"","object-cover":"","bg-active":"","rounded-t-lg":"",class:"aspect-1/1",border:"~ base"},mt=["src"],ft={flex:"~ gap1","items-center":""},ht={flex:"~ gap-2","items-center":"","justify-center":"",p8:""},_t=B({__name:"DropZone",props:{folder:{type:String,required:!0}},emits:["uploaded"],setup(a,{emit:s}){const o=a,_=pe(),f=R(!1),y=R(),c=R([]),C=["image","video"];function k(r){y.value=r.target,f.value=!0}function I(r){r.target===y.value&&(f.value=!1)}function E(r){r.preventDefault()}function F(r){r.preventDefault(),i(r.dataTransfer.files)}function i(r){const v=Array.from(r||[]);if(v.length){const d=[],h=c.value.map(p=>p.name);for(const p of v)if(h.includes(p.name)){let b=1;const[D,O]=p.name.split(".");for(;h.includes(`${D} (${b}).${O}`);)b++;const V=`${D}-${b}.${O}`,Y=new Blob([p],{type:p.type}),ee=new File([Y],V,{lastModified:Date.now()});d.push(ee),h.push(V)}else p.type===""?_("Folders are not supported yet","carbon:face-dissatisfied"):C.some(b=>p.type.includes(b))?d.push(p):_(`"${p.type}" file type is not allowed`,"carbon:face-dizzy");c.value=[...c.value,...d]}}async function u(){if(le.value||re.value)return;const r=[];for(const v of c.value){const d=new FileReader;d.readAsDataURL(v);const p=(await new Promise(b=>{d.onload=()=>b(d.result)})).split(";base64,").pop();r.push({name:v.name,data:p})}await K.writeStaticAssets([...r],o.folder).then(()=>{s("uploaded"),L(),_("Files uploaded successfully!","carbon:face-cool")}).catch(v=>{console.error(v),L(),_("Upload failed!","carbon:face-dizzy")}),f.value=!1}function P(r){c.value?.splice(r,1)}function N(r){return URL.createObjectURL(r)}function S(r,v){const[d,h]=r.name.split("."),p=v.replace(/\.\w+$/,""),b=`${p}.${h}`;return p.length===0?(alert("File name must be at least 1 characters long"),d):(Object.defineProperty(r,"name",{value:b,writable:!1}),c.value.splice(c.value.indexOf(r),1,r),r)}function T(){c.value=[]}function L(){f.value=!1,T()}return M("dragenter",k),M("dragleave",I),M("dragover",E),M("drop",F),(r,v)=>{const d=W,h=J,p=H,b=q;return n(),l("div",{fixed:"","top-0":"","right-0":"","bottom-0":"","z-10":"","transition-all":"","left-13":"","backdrop-blur-20":"",class:G(t(f)?"opacity-100 visible":"opacity-0 invisible")},[m(d,{icon:"carbon-close",absolute:"","z-20":"","text-xl":"","top-5":"","right-5":"",onClick:L}),t(c)?.length?(n(),l("div",ct,[dt,e("div",ut,[(n(!0),l(A,null,U(t(c),(D,O)=>(n(),l("div",{key:D.name,flex:"~ col gap-2",relative:"","items-center":"","w-40":"","h-50":""},[e("div",pt,[e("img",{"w-full":"","h-full":"","rounded-t-lg":"","object-cover":"",src:N(D)},null,8,mt)]),e("div",ft,[m(p,{n:"xs","flex-auto":"","model-value":D.name,"onUpdate:modelValue":V=>S(D,V.target.value)},null,8,["model-value","onUpdate:modelValue"]),m(d,{icon:"carbon-delete","flex-none":"",title:"Remove file",onClick:V=>P(O)},null,8,["onClick"])])]))),128))]),e("div",ht,[t(c).length?(n(),x(b,{key:0,n:"red",onClick:T},{default:j(()=>[m(h,{icon:"carbon-clean"}),z(" Clear ")]),_:1})):$("",!0),m(b,{disabled:!t(c).length,n:"primary solid",onClick:u},{default:j(()=>[m(h,{icon:"carbon-cloud-upload"}),z(" Upload ")]),_:1},8,["disabled"])])])):(n(),l("div",lt,[e("label",rt,[m(h,{icon:"carbon-cloud-upload","mr-2":""}),z(" Drop files here or click to select ")]),e("input",{id:"drop-zone-input",type:"file",multiple:"",hidden:"",onChange:v[0]||(v[0]=D=>i(D.target.files))},null,32)]))],2)}}}),vt={"h-full":"","of-auto":""},gt={flex:"~ gap4"},xt={"flex-none":"",flex:"~ gap4"},bt={op50:""},yt={key:0},wt={px2:"","mt--4":"",grid:"~ cols-minmax-8rem"},$t={key:1,p2:"",grid:"~ cols-minmax-8rem"},kt={key:1},Tt=B({__name:"assets",setup(a){const s=ce(),o=R(""),_=w(()=>new xe(s.value||[],{keys:["path"]})),f=w(()=>o.value?_.value.search(o.value).map(i=>i.item):s.value||[]),y=w(()=>{const F={};for(const i of f.value){const u=`${i.path.split("/").slice(0,-1).join("/")}/`;F[u]||(F[u]=[]),F[u].push(i)}return Object.entries(F).sort(([i],[u])=>i.localeCompare(u))}),c=R(),C=R("grid");function k(){C.value=C.value==="list"?"grid":"list"}de("Escape",()=>{c.value=void 0});const I=R();function E(){}return(F,i)=>{const u=H,P=J,N=_t,S=ot,T=fe,L=it,r=et,v=ge;return n(),l("div",vt,[e("div",{ref_key:"navbar",ref:I,flex:"~ col gap-2",border:"b base",p4:"","navbar-glass":"","flex-1":"",pb2:""},[e("div",gt,[m(u,{modelValue:t(o),"onUpdate:modelValue":i[0]||(i[0]=d=>ue(o)?o.value=d:null),placeholder:"Search...",icon:"carbon-search","flex-auto":"",p:"x5 y2",n:"primary"},null,8,["modelValue"]),e("div",xt,[e("button",{title:"Toggle view",onClick:k},[t(C)==="grid"?(n(),x(P,{key:0,icon:"i-carbon-list"})):(n(),x(P,{key:1,icon:"i-carbon-grid"}))])])]),e("div",bt,[t(o)?(n(),l("span",yt,g(t(f).length)+" matched Â· ",1)):$("",!0),e("span",null,g(t(s)?.length)+" assets in total",1)])],512),m(N,{folder:"/",onUploaded:E}),t(C)==="grid"?(n(),l(A,{key:0},[t(y).length>1?(n(!0),l(A,{key:0},U(t(y),([d,h])=>(n(),x(T,{key:d,text:d,description:`${h.length} items`,open:h.length<30,padding:!1},{default:j(()=>[e("div",wt,[(n(!0),l(A,null,U(h,p=>(n(),x(S,{key:p.path,asset:p,folder:d,onClick:b=>c.value=p},null,8,["asset","folder","onClick"]))),128))])]),_:2},1032,["text","description","open"]))),128)):(n(),l("div",$t,[(n(!0),l(A,null,U(t(f),d=>(n(),x(S,{key:d.path,asset:d,onClick:h=>c.value=d},null,8,["asset","onClick"]))),128))]))],64)):(n(),l("div",kt,[(n(!0),l(A,null,U(t(f),d=>(n(),x(L,{key:d.path,asset:d,onClick:h=>c.value=d},null,8,["asset","onClick"]))),128))])),m(v,{"model-value":!!t(c),"w-120":"","auto-close":"",navbar:t(I),onClose:i[1]||(i[1]=d=>c.value=void 0)},{default:j(()=>[t(c)?(n(),x(r,{key:0,asset:t(c)},null,8,["asset"])):$("",!0)]),_:1},8,["model-value","navbar"])])}}});export{Tt as default};
